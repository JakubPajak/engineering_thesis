\chapter{Wstęp}
\label{ch:wstep}

Niniejsza praca inżynierska stanowi propozycję rozwiązania problemu automatycznego sortowania klocków na podstawie wizji komputerowej, a dokładnie rozpoznania koloru obiektu. Temat pracy jest niezwykle aktualny, ze względu na bardzo dynamicznie rozwijający się przemysł nowych technologii 4.0, a więc powszechną robotyzację i automatyzację procesów. Projekt ten wpisuje się w trend stwarzając możliwość wykorzystania go w szeroko pojętym przemyśle oraz powierzchniach magazynowych. 

W rozdziale pierwszym zostanie omówiony problem, którego rozwiązaniem jest robot mobilny, osadzenie problemu w dziedzinie, cel pracy oraz krótki opis poszczególnych rozdziałów. 

\section{Wprowadzenie w problem}
\label{sec:wprowadzenie}

Proces sortowania przedmiotów jest zadaniem, do którego poprawnego wykonania konieczni byli ludzie, ze względu na umiejętność klasyfikowania obiektów na podstawie ich wizualnych cech. Wraz z rozwojem wizji komputerowej, możliwe stało się, aby oprogramowanie dokonywało podobnej klasyfikacji. Obecnie zaawansowane algorytmy uczenia maszynowego nierzadko są bardziej skuteczne i wielokrotnie bardziej wydajne od ludzi. 

Jednak, aby przeprowadzić proces sortowania w dynamicznym środowisku, wymagana jest obecność medium transportowego. W tym miejscu na przeciw wychodzi robotyka. Połączenie platformy mobilnej wraz z obsługą wizji komputerowej pozwala na uzyskanie bardzo skutecznej formy sortowania obiektów. 

Zastosowanie mobilnej platformy wyposażonej w kamerę jest szczególnie przydatne w dynamicznym środowisku przemysłowym lub magazynowym, gdzie istotna jest elastyczność i możliwość dostosowania trasy robota do aktualnych warunków. 

Sam fakt automatyzacji procesu sortowania niesie ze sobą dużo korzyści takich jak: zmniejszenie kosztów operacyjnych, zwiększenie efektywności oraz redukcję błędów ludzkich w procesie sortowania.  

\section{Osadzenie problemu w dziedzinie}
\label{sec:osadzenie}

Projekt można osadzić w dziedzinie robotyki mobilnej wspartej wizją komputerową. Roboty mobilne, zdolne do samodzielnej lub częściowo samodzielnej nawigacji oraz wykonywania wszelakich zadań, znajdują coraz szersze zastosowanie w przemyśle lub logistyce. W kontekście niniejszego projektu, kluczową rolę odgrywa zastosowanie odometrii oraz systemów napędowych, które pozwalają na precyzyjną kontrolę ruchu robota.

Wizja komputerowa, z kolei, umożliwia rozpoznawanie obiektów na podstawie ich cech wizualnych. Technologia ta, oparta na bibliotekach takich jak OpenCV, stała się dostępna nawet dla małych systemów wbudowanych, na przykład Raspberry Pi. W niniejszym projekcie robot wykorzystuje kamerę do rejestrowania obrazów obiektów, które następnie są analizowane w czasie rzeczywistym w celu określenia koloru, a na tej podstawie podejmowana jest decyzja, gdzie bieżący klocek powinien zostać przetransportowany.

\section{Cel pracy}
\label{sec:cel}

Celem projektu jest zaprojektowanie oraz zbudowanie platformy jezdnej pracującej w trybie automatycznym. Ponadto celem jest implementacja systemu kontroli robota, umożliwiającego samodzielne podejmowanie decyzji o wyborze miejsca docelowego dla danego obiektu.

Istotnym założeniem poprawności działania platformy jest dokładność i powtarzalność działania, wpływająca na możliwość automatycznej pracy bez ingerencji człowieka.

Dodatkowo system powinien być elastyczny, umożliwiający łatwe rozszerzenie o dodatkowe funkcje, takie jak rozpoznawanie większej liczby kolorów lub innych cech klocków.


\section{Zakres pracy}
\label{sec:zakres}

Projekt obejmuje szeroki zakres działań, zarówno w zakresie sprzętowym, jak i programistycznym. Poniżej przedstawiono główne etapy realizacji:

\begin{itemize}
    \item Zbudowanie fizycznej platformy jezdnej, w tym konstrukcji mechanicznej oraz systemu napędowego.
    \item Implementacja systemu rozpoznawania kolorów za pomocą kamery oraz algorytmów wizji komputerowej z użyciem Raspberry Pi i biblioteki OpenCV.
    \item Opracowanie algorytmu podejmowania decyzji na podstawie rozpoznanego koloru i przekierowania klocka do odpowiedniego pojemnika.
    \item Testowanie i optymalizacja działania systemu, aby zapewnić jego poprawne funkcjonowanie w rzeczywistych warunkach.
\end{itemize}

\section{Charakterystyka rozdziałów}
\label{sec:charakterystyka}

Praca została podzielona na następujące rozdziały:

\begin{itemize}
    \item \textbf{Rozdział 1: Wstęp} – Przedstawienie problemu, celów, zakresu projektu, a także przegląd dostępnych rozwiązań, technik oraz technologii stosowanych w podobnych systemach i omówienie aktualnego stanu wiedzy w tej dziedzinie.
    \item \textbf{Rozdział 2: Założenia projektowe} – Opis wymagań projektowych, przedstawienie diagramów funkcjonalnych, opis wykorzystanego sprzętu elektronicznego oraz metodyka pracy. 
    \item \textbf{Rozdział 3: Podstawy teoretyczne} – Przedstawienie teoretycznych podstaw działania wykorzystanych technologii. 
    \item \textbf{Rozdział 4: Wymagania i specyfikacja użytkowa} – Opis funkcjonalności systemu z perspektywy użytkownika,w tym sposobu instalacji oraz wykorzystania. 
    \item \textbf{Rozdział 5: Specyfikacja techniczna} – Szczegółowa analiza implementacji systemu, w tym struktury oprogramowania i integracji z komponentami sprzętowymi.
    \item \textbf{Rozdział 6: Weryfikacja pracy robota} – Opis przeprowadzonych testów, ocena efektywności systemu oraz zgodności z założeniami projektowymi.
    \item \textbf{Rozdział 7: Podsumowanie i wnioski} – Zakończenie projektu, omówienie osiągniętych celów, a także wskazanie możliwych kierunków rozwoju systemu.
\end{itemize}

% \section{Wkład autora}
% \label{sec:wklad}

% Projekt został w pełni zrealizowany przez autora. Autor odpowiada za wszystkie etapy pracy, począwszy od projektowania i budowy platformy, poprzez implementację algorytmów rozpoznawania kolorów i sterowania ruchem robota, aż po testowanie i optymalizację systemu. Ponadto, autor zaprojektował system kontrolny, który pozwala na monitorowanie pracy robota w czasie rzeczywistym oraz umożliwia wprowadzenie ewentualnych korekt.

\section{Osadzenie tematu w kontekście aktualnego stanu wiedzy (\textit{state of the art})}
\label{sec:state_of_the_art}

Temat projektu osadzić można w dziedzinach robotyki mobilnej oraz wizji komputerowej. W ciągu ostatnich lat dynamiczny rozwój wizji komputerowej zaowocował licznymi artykułami naukowymi oraz książkami poświęconymi tej tematyce. 

Robotyka mobilna, kinematyka robotów oraz teoria sterowania obecna jest w środowisku naukowym od wielu lat, dzięki czemu z łatwością można znaleźć wiele materiałów poświęconych tej problematyce. 

\section{Studia literaturowe}
\label{sec:studia_literaturowe}

Podczas prac nad poszczególnym elementami projektu istotną rolę odgrywała analiza dostępnej literatury naukowej. W sekcjach [\ref{sec:opracowania-wizja}] oraz [\ref{sec:opracowanie-silnik}] znajduje się analiza artykułów, książek, dokumentacji oraz stron internetowych, których treść okazała się przydatna podczas pracy. 

\subsection{Opracowanie systemu wizyjnego}
\label{sec:opracowania-wizja}

System wizyjny oparty został na dedykowanej kamerze dla platformy Raspberry Pi oraz na popularnej bibliotece OpenCV, co pozwala na efektywną analizę obrazu i klasyfikację obiektów w czasie rzeczywistym. 

W tym celu kluczowa okazała się dokumentacja biblioteki Libcamera2 \cite{bib:manualLibcamera2}, oferująca szczegółowe informacje na temat instalacji, konfiguracji kamery, oraz wykorzystania łącza CSI (ang. \english{Camera Serial Interface}) do przesyła obrazu. Dokumentacja dostarczona przez Raspberry Pi Ltd zawiera obszerne wytyczne dotyczące ustawień obrazu, obsługi błędów oraz optymalizacji parametrów obrazu pod kątem specyficznych wymagań, takich jak rozmiar obrazu, automatycznego wyostrzenia obrazu, przestrzeni barw etc.

W celu zaawansowanego przetwarzania obrazu wykorzystano bibliotekę OpenCV. Dla zrozumienia jej funkcjonalności, zwłaszcza w kontekście realizacji projektu, cennym źródłem była literatura specjalistyczna, m.in. książka \cite{bib:ksiazka}, która stanowi kompleksowy przegląd możliwości tej biblioteki. Książka ta obejmuje szeroką gamę algorytmów i metod przetwarzania obrazu, z których jedynie wybrane fragmenty — jak detekcja krawędzi za pomocą algorytmu Canny’ego oraz analiza barw — zostały zaimplementowane w niniejszym projekcie. Wybór tych technik wynikał z ich efektywności oraz dostosowania do wymagań projektu, jakim jest klasyfikacja obiektów na podstawie koloru.

Przy opracowywaniu metody rozpoznawania kolorów wykorzystano również wyniki badań z publikacji \cite{bib:artykul2}, opisującej różnorodne metody i algorytmy analizy wizyjnej, stosowane w procesie klasyfikacji obiektów na podstawie ich cech kolorystycznych. Dzięki znajomości podstaw teoretycznych zaprezentowanych w tym dokumencie, wybór odpowiednich technik przetwarzania obrazu oraz implementacja algorytmu klasyfikacji kolorów przebiegały bardziej efektywnie.

Kolejnym istotnym krokiem była analiza metod detekcji krawędzi w celu wykrycia klocka, przy czym szczególna uwaga została poświęcona algorytmom i funkcjom dostępnym w bibliotece OpenCV. Podczas przeprowadzania studiów literaturowych przeanalizowane zostały artykuł \cite{bib:artykul}, który szczegółowo omawia różne techniki detekcji krawędzi. Po dokonaniu analizy, jako metoda najbardziej odpowiednia dla projektu została wybrana detekcja krawędzi metodą Canny’ego, ze względu na jej skuteczność w kontekście warunków oświetleniowych oraz wysoką precyzję w identyfikacji krawędzi obiektów oraz praca popełniona przez twórcę metody - John' a Canny \cite{bib:canny-article}.


\subsection{Opracowanie systemu kontroli silników}
\label{sec:opracowanie-silnik}
System kontroli silników platformy mobilnej oparto o napęd różnicowy, który wybrano ze względu na jego precyzję oraz stosunkowo prostą implementację algorytmów sterujących. Napęd różnicowy umożliwia manewrowanie robotem poprzez odpowiednie sterowanie prędkością oraz kierunkiem obrotu poszczególnych kół, co jest szczególnie istotne w zastosowaniach wymagających dokładności na ograniczonej przestrzeni. Przy opracowywaniu systemu sterowania, teoretyczną podstawę stanowiły wyniki badań opisane w artykule \cite{bib:konferencja} oraz \cite{bib:encoders-pid}, który szczegółowo omawia technikę regulacji PID (proporcjonalno-całkująco-różniczkującą) w zastosowaniu do robotów mobilnych z napędem różnicowym. 

Istotnym elementem systemu kontroli była również implementacja funkcji zliczających impulsy enkoderów, które monitorują ruch robota i pozwalają na dokładną analizę przebytej drogi oraz prędkości. W projekcie dostępne były dwie metody odczytywania impulsów generowanych przez enkodery: poprzez przerwania generowane przy każdym impulsie oraz przy użyciu wbudowanego licznika mikrokontrolera. Wybór metody wiązał się z koniecznością dokładnego zrozumienia zarówno korzyści, jak i ograniczeń każdej z nich.

Analiza dokumentacji mikrokontrolera ATMega328 \cite{bib:manualarduino} oraz literatury opisującej przerwania \cite{bib:artykul1}, umożliwiła dobre zrozumienie mechanizmów przerwań oraz wbudowanych modułów liczników. To pozwoliło na rozumienie ograniczeń wynikających z zastosowania kontrolera ATMega328 oraz wybór najlepszego dostępnego rozwiązania. 

